(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{125:function(e,t,a){},126:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(14),r=a.n(s),o=(a(94),a(18)),i=(a(95),a(66),a(165)),l=a(25),u=a(22),p=a.n(u),j=a(30),d=a(156),b=a(162),m=a(163),O=a(76),h=a.n(O).a.create({baseURL:"https://post-share-app.herokuapp.com/"}),f=function(e,t){return h.post("/posts/".concat(t,"/commentPost"),{value:e})},v=function(e){return function(){var t=Object(j.a)(p.a.mark((function t(a){var n,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s=e,h.post("/posts",s);case 3:n=t.sent,c=n.data,a({type:"CREATE",payload:c}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.message);case 11:case"end":return t.stop()}var s}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e,t){return function(){var a=Object(j.a)(p.a.mark((function a(n){var c,s;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f(e,t);case 3:return c=a.sent,s=c.data,n({type:"COMMENT",payload:s}),a.abrupt("return",s.comments);case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},x=a(6),_=function(e){var t=e.user,a=e.post,c=Object(l.b)(),s=Object(n.useState)(""),r=Object(o.a)(s,2),i=r[0],u=r[1],O=Object(n.useState)(null===a||void 0===a?void 0:a.comments),h=Object(o.a)(O,2),f=h[0],v=h[1],_=function(){var e=Object(j.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(g("".concat(null===t||void 0===t?void 0:t.displayName,": ").concat(i),a._id));case 2:n=e.sent,u(""),v(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"post__comments",children:[Object(x.jsx)("div",{children:null===f||void 0===f?void 0:f.map((function(e,t){return Object(x.jsxs)(d.a,{gutterBottom:!0,variant:"subtitle1",children:[Object(x.jsx)("strong",{children:e.split(":")[0]})," ",e.split(":")[1]]},t)}))}),(null===t||void 0===t?void 0:t.displayName)&&Object(x.jsxs)("div",{children:[Object(x.jsx)(b.a,{fullWidth:!0,rows:1,variant:"outlined",label:"Comment",multiline:!0,value:i,onChange:function(e){return u(e.target.value)}}),Object(x.jsx)(m.a,{style:{marginTop:"10px"},fullWidth:!0,disabled:!i.length,color:"primary",variant:"contained",onClick:_,children:"Comment"})]})]})};var y=function(e){var t=e.user,a=Object(l.c)((function(e){return e.posts}));return console.log(a),Object(x.jsx)("div",{children:a.map((function(e){return Object(x.jsxs)("div",{className:"post",children:[Object(x.jsxs)("div",{className:"post__header",children:[Object(x.jsx)(i.a,{className:"post__avatar",alt:e.user,src:"/static/images/avatar/1.jpg"}),Object(x.jsx)("h3",{children:e.user})]}),Object(x.jsx)("img",{className:"post__image",src:e.image,alt:"post"}),Object(x.jsxs)("h4",{className:"post__text",children:[Object(x.jsx)("strong",{children:"Caption: "}),Object(x.jsx)("span",{className:"post__caption",children:e.caption})," "]}),Object(x.jsx)(_,{user:t,post:e})]})}))})},w=a(48),N=(w.a.initializeApp({apiKey:"AIzaSyCHP2i2BbClrFviS_jWfiTai7U5nhfgszo",authDomain:"instagram-clone-94052.firebaseapp.com",projectId:"instagram-clone-94052",storageBucket:"instagram-clone-94052.appspot.com",messagingSenderId:"1028378616626",appId:"1:1028378616626:web:f75101ff41cf6739276d2b"}).firestore(),w.a.auth()),C=(w.a.storage(),a(161)),S=a(164),k=a(160),E=a(37),A=(a(125),a(81)),I=a.n(A);var L=function(e){var t=e.user,a=Object(n.useState)(""),c=Object(o.a)(a,2),s=(c[0],c[1],Object(n.useState)("")),r=Object(o.a)(s,2),i=(r[0],r[1],Object(n.useState)(0)),u=Object(o.a)(i,2),d=(u[0],u[1],Object(n.useState)("")),b=Object(o.a)(d,2),O=(b[0],b[1],Object(l.b)()),h=Object(n.useState)({caption:"",user:"",image:""}),f=Object(o.a)(h,2),g=f[0],_=f[1];console.log(null===t||void 0===t?void 0:t.displayName);var y=function(){var e=Object(j.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(g),O(v(Object(E.a)(Object(E.a)({},g),{},{user:null===t||void 0===t?void 0:t.displayName}))),_({caption:"",user:"",image:""});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"imageupload",children:[Object(x.jsx)("input",{type:"text",placeholder:"Enter a Caption...",onChange:function(e){return _(Object(E.a)(Object(E.a)({},g),{},{caption:e.target.value}))},value:g.caption}),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:Object(x.jsx)(I.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return _(Object(E.a)(Object(E.a)({},g),{},{image:t}))}})}),Object(x.jsx)(m.a,{className:"imageUpload__button",color:"primary",variant:"contained",onClick:y,children:"Upload"})]})]})};function T(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var U=Object(C.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var P=function(){var e=U(),t=c.a.useState(T),a=Object(o.a)(t,1)[0],s=Object(n.useState)([]),r=Object(o.a)(s,2),u=(r[0],r[1],Object(n.useState)(!1)),d=Object(o.a)(u,2),b=d[0],O=d[1],f=Object(n.useState)(""),v=Object(o.a)(f,2),g=v[0],_=v[1],w=Object(n.useState)(""),C=Object(o.a)(w,2),E=C[0],A=C[1],I=Object(n.useState)(""),P=Object(o.a)(I,2),R=P[0],W=P[1],B=Object(n.useState)(null),D=Object(o.a)(B,2),H=D[0],M=D[1],z=Object(n.useState)(!1),F=Object(o.a)(z,2),J=F[0],K=F[1],q=Object(n.useState)(0),G=Object(o.a)(q,2),Q=(G[0],G[1],Object(l.b)());return Object(n.useEffect)((function(){Q(function(){var e=Object(j.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.get("/posts");case 3:a=e.sent,n=a.data,console.log(n),t({type:"FETCH_ALL",payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){var e=N.onAuthStateChanged((function(e){if(e){if(console.log(e),M(e),!e.displayName)return e.updateProfile({displayName:g})}else M(null)}));return function(){e()}}),[H,g]),Object(x.jsxs)("div",{className:"app",children:[Object(x.jsx)(S.a,{open:b,onClose:function(){return O(!1)},children:Object(x.jsx)("div",{style:a,className:e.paper,children:Object(x.jsxs)("form",{className:"app__signup",children:[Object(x.jsx)("center",{children:Object(x.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"form-logo"})}),Object(x.jsx)(k.a,{type:"text",placeholder:"username",value:g,onChange:function(e){return _(e.target.value)}}),Object(x.jsx)(k.a,{placeholder:"email",type:"text",value:R,onChange:function(e){return W(e.target.value)}}),Object(x.jsx)(k.a,{placeholder:"password",type:"password",value:E,onChange:function(e){return A(e.target.value)}}),Object(x.jsx)(m.a,{type:"submit",onClick:function(e){e.preventDefault(),N.createUserWithEmailAndPassword(R,E).then((function(e){return e.user.updateProfile({displayName:g})})).catch((function(e){return alert(e.message)}))},children:"Sign Up"})]})})}),Object(x.jsx)(S.a,{open:J,onClose:function(){return K(!1)},children:Object(x.jsx)("div",{style:a,className:e.paper,children:Object(x.jsxs)("form",{className:"app__login",children:[Object(x.jsx)("center",{children:Object(x.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})}),Object(x.jsx)(k.a,{placeholder:"email",type:"text",value:R,onChange:function(e){return W(e.target.value)}}),Object(x.jsx)(k.a,{placeholder:"password",type:"password",value:E,onChange:function(e){return A(e.target.value)}}),Object(x.jsx)(m.a,{type:"submit",onClick:function(e){e.preventDefault(),N.signInWithEmailAndPassword(R,E).catch((function(e){return alert(e.message)})),K(!1)},children:"Login"})]})})}),Object(x.jsxs)("div",{className:"app__header",children:[Object(x.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""}),(null===H||void 0===H?void 0:H.displayName)?Object(x.jsxs)("div",{className:"app__headerRight",children:[Object(x.jsx)(m.a,{onClick:function(){return N.signOut()},children:"Logout"}),Object(x.jsx)(i.a,{className:"app__headerAvatar",alt:H.displayName,src:"/static/images/avatar/1.jpg"})]}):Object(x.jsxs)("form",{className:"app__loginHome",children:[Object(x.jsx)(m.a,{onClick:function(){return K(!0)},children:"Login"}),Object(x.jsx)(m.a,{onClick:function(){return O(!0)},children:"Sign Up"})]})]}),Object(x.jsxs)("div",{className:"app__posts",children:[Object(x.jsx)("div",{className:"app__postsLeft",children:Object(x.jsx)(y,{user:H})}),Object(x.jsx)("div",{className:"app__postsRight"})]}),Object(x.jsx)("div",{className:"app__upload",children:Object(x.jsx)(L,{user:H})})]})},R=a(42),W=a(82),B=a(83),D=Object(R.b)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL":return t.payload;case"CREATE":return[].concat(Object(B.a)(e),[t.payload]);case"COMMENT":return e.map((function(e){return e._id===t.payload._id?t.payload:e}));default:return e}}}),H=Object(R.d)(D,Object(R.c)(Object(R.a)(W.a)));r.a.render(Object(x.jsx)(l.a,{store:H,children:Object(x.jsx)(P,{})}),document.getElementById("root"))},66:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){}},[[126,1,2]]]);
//# sourceMappingURL=main.22c842f3.chunk.js.map