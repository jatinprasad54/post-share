{"version":3,"sources":["api/index.js","actions/posts.js","Comment.js","Post.js","Firebase.js","ImageUpload.js","App.js","reducers/index.js","reducers/posts.js","index.js"],"names":["API","axios","create","baseURL","comment","value","id","post","createPost","dispatch","a","newPost","data","type","payload","console","log","message","commentPost","api","comments","Comment","user","useDispatch","useState","setComment","setComments","postComment","displayName","_id","newComments","className","map","c","i","Typography","gutterBottom","variant","split","TextField","fullWidth","rows","label","multiline","onChange","e","target","Button","style","marginTop","disabled","length","color","onClick","Post","posts","useSelector","state","Avatar","alt","src","image","caption","auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","storage","ImageUpload","postData","setPostData","handleUpload","placeholder","event","multiple","onDone","base64","getModalStyle","top","left","transform","useStyles","makeStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","App","classes","React","modalStyle","open","setOpen","username","setUsername","password","setPassword","email","setEmail","setUser","openSignIn","setOpenSignIn","useEffect","get","unsubscribe","onAuthStateChanged","authUser","updateProfile","Modal","onClose","Input","preventDefault","createUserWithEmailAndPassword","then","catch","error","alert","signInWithEmailAndPassword","signOut","reducers","combineReducers","action","store","createStore","compose","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.22c842f3.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\n//const url = \"http://localhost:5000/posts\";\r\nconst API = axios.create({ baseURL: \"https://post-share-app.herokuapp.com/\" });\r\n\r\nexport const fetchPosts = () => API.get(\"/posts\");\r\nexport const createPost = (newPost) => API.post(\"/posts\", newPost);\r\nexport const comment = (value, id) =>\r\n  API.post(`/posts/${id}/commentPost`, { value });\r\n//export const likePost = (id) => axios.patch(`${url}/${id}/likePost`);\r\n//export const updatePost = (id, updatedPost) => axios.patch(`${url}/${id}`, updatedPost);\r\n//export const deletePost = (id) => axios.delete(`${url}/${id}`);\r\n","import * as api from \"../api/index.js\";\r\n\r\nexport const getPosts = () => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.fetchPosts();\r\n    console.log(data);\r\n    dispatch({ type: \"FETCH_ALL\", payload: data });\r\n  } catch (error) {\r\n    console.log(error.message);\r\n  }\r\n};\r\nexport const createPost = (post) => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.createPost(post);\r\n\r\n    dispatch({ type: \"CREATE\", payload: data });\r\n  } catch (error) {\r\n    console.log(error.message);\r\n  }\r\n};\r\n\r\nexport const commentPost = (value, id) => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.comment(value, id);\r\n\r\n    dispatch({ type: \"COMMENT\", payload: data });\r\n\r\n    return data.comments;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import React, { useState } from \"react\";\r\nimport \"./Post.css\";\r\nimport { Input, TextField, Button, Typography } from \"@material-ui/core\";\r\nimport { commentPost } from \"./actions/posts\";\r\nimport { useDispatch } from \"react-redux\";\r\nconst Comment = ({ user, post }) => {\r\n  const dispatch = useDispatch();\r\n  const [comment, setComment] = useState(\"\");\r\n\r\n  const [comments, setComments] = useState(post?.comments);\r\n\r\n  const postComment = async () => {\r\n    //e.preventDefault();\r\n    const newComments = await dispatch(\r\n      commentPost(`${user?.displayName}: ${comment}`, post._id)\r\n    );\r\n    setComment(\"\");\r\n    setComments(newComments);\r\n  };\r\n\r\n  return (\r\n    <div className=\"post__comments\">\r\n      <div>\r\n        {comments?.map((c, i) => (\r\n          <Typography key={i} gutterBottom variant=\"subtitle1\">\r\n            <strong>{c.split(\":\")[0]}</strong> {c.split(\":\")[1]}\r\n          </Typography>\r\n        ))}\r\n        {/* {comments?.map((c) => (\r\n          <p>\r\n            <b>{c}</b>\r\n          </p>\r\n        ))} */}\r\n      </div>\r\n      {user?.displayName && (\r\n        <div>\r\n          <TextField\r\n            fullWidth\r\n            rows={1}\r\n            variant=\"outlined\"\r\n            label=\"Comment\"\r\n            multiline\r\n            value={comment}\r\n            onChange={(e) => setComment(e.target.value)}\r\n          />\r\n          <Button\r\n            style={{ marginTop: \"10px\" }}\r\n            fullWidth\r\n            disabled={!comment.length}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            onClick={postComment}\r\n          >\r\n            Comment\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comment;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./Post.css\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Comment from \"./Comment\";\r\nfunction Post({ user }) {\r\n  const posts = useSelector((state) => state.posts);\r\n  console.log(posts);\r\n\r\n  return (\r\n    <div>\r\n      {posts.map((post) => (\r\n        <div className=\"post\">\r\n          <div className=\"post__header\">\r\n            <Avatar\r\n              className=\"post__avatar\"\r\n              alt={post.user}\r\n              src=\"/static/images/avatar/1.jpg\"\r\n            />\r\n            <h3>{post.user}</h3>\r\n          </div>\r\n          <img className=\"post__image\" src={post.image} alt=\"post\" />\r\n          <h4 className=\"post__text\">\r\n            <strong>Caption: </strong>\r\n            <span className=\"post__caption\">{post.caption}</span>{\" \"}\r\n          </h4>\r\n\r\n          <Comment user={user} post={post} />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Post;\r\n","import firebase from \"firebase\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyCHP2i2BbClrFviS_jWfiTai7U5nhfgszo\",\r\n    authDomain: \"instagram-clone-94052.firebaseapp.com\",\r\n    projectId: \"instagram-clone-94052\",\r\n    storageBucket: \"instagram-clone-94052.appspot.com\",\r\n    messagingSenderId: \"1028378616626\",\r\n    appId: \"1:1028378616626:web:f75101ff41cf6739276d2b\"\r\n  };\r\n\r\n\r\n\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\nconst db = firebaseApp.firestore();\r\nconst auth =firebase.auth();\r\nconst storage = firebase.storage();\r\n\r\nexport { db , auth, storage};","import { Button } from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\nimport { storage, db } from \"./Firebase\";\r\nimport firebase from \"firebase\";\r\nimport \"./ImageUpload.css\";\r\n\r\nimport FileBase64 from \"react-file-base64\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { createPost } from \"./actions/posts\";\r\n\r\nfunction ImageUpload({ user }) {\r\n  const [caption, setCaption] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [progress, setProgress] = useState(0);\r\n  const [url, setUrl] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const [postData, setPostData] = useState({\r\n    caption: \"\",\r\n    user: \"\",\r\n    image: \"\",\r\n  });\r\n  console.log(user?.displayName);\r\n  const handleChange = (e) => {\r\n    //this select the file to be uploaded and stored in image\r\n    if (e.target.files[0]) {\r\n      setImage(e.target.files[0]);\r\n    }\r\n  };\r\n\r\n  //this upload the image on firebase databse\r\n  const handleUpload = async (e) => {\r\n    //e.preventDefault();\r\n    console.log(postData);\r\n    dispatch(createPost({ ...postData, user: user?.displayName }));\r\n\r\n    //timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n\r\n    //setProgress(0);\r\n    setPostData({\r\n      caption: \"\",\r\n      user: \"\",\r\n      image: \"\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"imageupload\">\r\n      {/* <progress className=\"imageupload__progress\" value={progress} max=\"100\" /> */}\r\n\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Enter a Caption...\"\r\n        onChange={(event) =>\r\n          setPostData({ ...postData, caption: event.target.value })\r\n        }\r\n        value={postData.caption}\r\n      />\r\n      {/* <input\r\n        type=\"text\"\r\n        placeholder=\"Enter a UserName\"\r\n        onChange={(event) =>\r\n          setPostData({ ...postData, user: event.target.value })\r\n        }\r\n        value={postData.user}\r\n      /> */}\r\n      <div>\r\n        {/* <input type=\"file\" onChange={handleChange} /> */}\r\n        <div>\r\n          <FileBase64\r\n            type=\"file\"\r\n            multiple={false}\r\n            onDone={({ base64 }) => setPostData({ ...postData, image: base64 })}\r\n          />\r\n        </div>\r\n        <Button\r\n          className=\"imageUpload__button\"\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          onClick={handleUpload}\r\n        >\r\n          Upload\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImageUpload;\r\n","import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Post from \"./Post\";\nimport { auth, db } from \"./Firebase\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Modal from \"@material-ui/core/Modal\";\nimport { Button, Input, Avatar } from \"@material-ui/core\";\nimport ImageUpload from \"./ImageUpload\";\n\nimport { useDispatch } from \"react-redux\";\nimport { getPosts } from \"./actions/posts\";\nimport { useSelector } from \"react-redux\";\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: \"absolute\",\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nfunction App() {\n  const classes = useStyles();\n  const [modalStyle] = React.useState(getModalStyle);\n  const [posts, setPosts] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [user, setUser] = useState(null);\n  const [openSignIn, setOpenSignIn] = useState(false);\n  // const [registerOpen, setRegisterOpen] = useState(false);\n  const [currentId, setCurrentId] = useState(0);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(getPosts());\n  }, []);\n\n  //console.log(\"posts are >>>\", post);\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged((authUser) => {\n      if (authUser) {\n        // user is logged in...\n        console.log(authUser);\n        setUser(authUser);\n\n        if (authUser.displayName) {\n          // dont update username\n        } else {\n          return authUser.updateProfile({\n            displayName: username,\n          });\n        }\n      } else {\n        setUser(null);\n      }\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, [user, username]);\n\n  const signUp = (event) => {\n    event.preventDefault();\n\n    auth\n      .createUserWithEmailAndPassword(email, password)\n      .then((authUser) => {\n        return authUser.user.updateProfile({\n          displayName: username,\n        });\n      })\n      .catch((error) => alert(error.message));\n  };\n\n  const signIn = (event) => {\n    event.preventDefault();\n\n    auth\n      .signInWithEmailAndPassword(email, password)\n      .catch((error) => alert(error.message));\n\n    setOpenSignIn(false);\n  };\n\n  return (\n    <div className=\"app\">\n      <Modal open={open} onClose={() => setOpen(false)}>\n        <div style={modalStyle} className={classes.paper}>\n          <form className=\"app__signup\">\n            <center>\n              <img\n                className=\"app__headerImage\"\n                src=\"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png\"\n                alt=\"form-logo\"\n              />\n            </center>\n            <Input\n              type=\"text\"\n              placeholder=\"username\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n            />\n            <Input\n              placeholder=\"email\"\n              type=\"text\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n            <Input\n              placeholder=\"password\"\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n            <Button type=\"submit\" onClick={signUp}>\n              Sign Up\n            </Button>\n          </form>\n        </div>\n      </Modal>\n      <Modal open={openSignIn} onClose={() => setOpenSignIn(false)}>\n        <div style={modalStyle} className={classes.paper}>\n          <form className=\"app__login\">\n            <center>\n              <img\n                className=\"app__headerImage\"\n                src=\"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png\"\n                alt=\"\"\n              />\n            </center>\n\n            <Input\n              placeholder=\"email\"\n              type=\"text\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n            <Input\n              placeholder=\"password\"\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n            <Button type=\"submit\" onClick={signIn}>\n              Login\n            </Button>\n          </form>\n        </div>\n      </Modal>\n      <div className=\"app__header\">\n        <img\n          className=\"app__headerImage\"\n          src=\"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png\"\n          alt=\"\"\n        />\n        {user?.displayName ? (\n          <div className=\"app__headerRight\">\n            <Button onClick={() => auth.signOut()}>Logout</Button>\n            <Avatar\n              className=\"app__headerAvatar\"\n              alt={user.displayName}\n              src=\"/static/images/avatar/1.jpg\"\n            />\n          </div>\n        ) : (\n          <form className=\"app__loginHome\">\n            <Button onClick={() => setOpenSignIn(true)}>Login</Button>\n            <Button onClick={() => setOpen(true)}>Sign Up</Button>\n          </form>\n        )}\n      </div>\n      <div className=\"app__posts\">\n        <div className=\"app__postsLeft\">\n          <Post\n            user={user}\n            //setCurrentId={setCurrentId}\n            // key={post._id}\n            // postId={post._id}\n            // user={user}\n            // username={post.user}\n            // caption={post.caption}\n            // imageURL={post.image}\n          />\n        </div>\n        <div className=\"app__postsRight\">{/* <h1> Embed</h1> */}</div>\n      </div>\n\n      {true ? (\n        <div className=\"app__upload\">\n          <ImageUpload user={user} />\n        </div>\n      ) : (\n        <center>\n          <h3>Sorry you need to login to upload</h3>{\" \"}\n        </center>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import { combineReducers } from \"redux\";\r\n\r\nimport posts from \"./posts\";\r\n\r\nexport const reducers = combineReducers({ posts });\r\n","export default (posts = [], action) => {\r\n  switch (action.type) {\r\n    case \"FETCH_ALL\":\r\n      return action.payload;\r\n    //   case LIKE:\r\n    //     return posts.map((post) => (post._id === action.payload._id ? action.payload : post));\r\n    case \"CREATE\":\r\n      return [...posts, action.payload];\r\n    //   case UPDATE:\r\n    //     return posts.map((post) => (post._id === action.payload._id ? action.payload : post));\r\n    //   case DELETE:\r\n    //     return posts.filter((post) => post._id !== action.payload);\r\n    case \"COMMENT\":\r\n      return posts.map((post) => {\r\n        if (post._id === action.payload._id) {\r\n          return action.payload;\r\n        }\r\n        return post;\r\n      });\r\n    default:\r\n      return posts;\r\n  }\r\n};\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { reducers } from \"./reducers\";\n\nconst store = createStore(reducers, compose(applyMiddleware(thunk)));\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}