{"ast":null,"code":"var _jsxFileName = \"D:\\\\REACT\\\\7.Instagram\\\\instagram-clone\\\\src\\\\ImageUpload.js\",\n    _s = $RefreshSig$();\n\nimport { Button } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { storage, db } from './firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ImageUpload({\n  username\n}) {\n  _s();\n\n  const [caption, setCaption] = useState('');\n  const [image, setImage] = useState(null);\n  const [progress, setProgress] = useState(0);\n\n  const handleChange = e => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  const handleUpload = () => {\n    const uploadTask = storage.ref(`images/${image.name}`).put(image); //this upload the image on firebase db\n\n    uploadTask.on(\"state-changed\", snapshot => {\n      //progress function ...\n      //belowed line is just copied\n      const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(progress);\n    }, error => {\n      //Error function...\n      console.log(error);\n      alert(error.message);\n    }, () => {\n      storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n        //this gets the link of image uploaded on firebase \n        db.collection(\"posts\").add({\n          //adding the image on firebase DB\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n          caption: caption,\n          imageURL: url,\n          username: username\n        });\n      }); //above code gets the link of image uploaded on firebase\n\n      setProgress(0);\n      setCaption(\"\");\n      setImage(null);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"progress\", {\n      value: progress,\n      max: \"100\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Enter a Caption...\",\n      onChange: event => setCaption(event.target.value),\n      value: caption\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleUpload,\n      children: \"Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ImageUpload, \"Dymd4lhsktEIRi3pFV4pIJzjAEI=\");\n\n_c = ImageUpload;\nexport default ImageUpload;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImageUpload\");","map":{"version":3,"sources":["D:/REACT/7.Instagram/instagram-clone/src/ImageUpload.js"],"names":["Button","React","useState","storage","db","ImageUpload","username","caption","setCaption","image","setImage","progress","setProgress","handleChange","e","target","files","handleUpload","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","alert","message","child","getDownloadURL","then","url","collection","add","timestamp","firebase","firestore","FieldValue","serverTimestamp","imageURL","event","value"],"mappings":"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","sourcesContent":["import { Button } from '@material-ui/core';\r\nimport React,{useState} from 'react';\r\nimport {storage, db } from './firebase';\r\n\r\nfunction ImageUpload({username}) {\r\n    const [caption,setCaption] = useState('');\r\n    const [image,setImage] = useState(null);\r\n    const [progress,setProgress] = useState(0);\r\n    \r\n    const handleChange = (e) => {\r\n        if(e.target.files[0]){\r\n            setImage(e.target.files[0]);\r\n        }\r\n    }\r\n\r\n    const handleUpload = () => {\r\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);   //this upload the image on firebase db\r\n\r\n    uploadTask.on(\r\n        \"state-changed\",\r\n        (snapshot) => {\r\n            //progress function ...\r\n            //belowed line is just copied\r\n            const progress = Math.round(\r\n                (snapshot.bytesTransferred / snapshot.totalBytes)*100\r\n            );\r\n            setProgress(progress);\r\n        },\r\n        (error) => {\r\n            //Error function...\r\n            console.log(error);\r\n            alert(error.message);\r\n        },\r\n        () => {\r\n            storage\r\n             .ref(\"images\")\r\n             .child(image.name)\r\n             .getDownloadURL()\r\n             .then(url => {\r\n                 //this gets the link of image uploaded on firebase \r\n                 db.collection(\"posts\").add({                       //adding the image on firebase DB\r\n                     timestamp:firebase.firestore.FieldValue.serverTimestamp(),\r\n                     caption: caption,\r\n                     imageURL: url,\r\n                     username: username\r\n                 })\r\n             });\r\n             //above code gets the link of image uploaded on firebase\r\n\r\n             setProgress(0);\r\n             setCaption(\"\");\r\n             setImage(null);\r\n        }\r\n    )\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <progress value={progress} max=\"100\" />\r\n            <input type=\"text\" placeholder=\"Enter a Caption...\" onChange={event => setCaption(event.target.value)} value={caption}/>\r\n            <input type=\"file\" onChange={handleChange}/>\r\n            <Button onClick={handleUpload}>\r\n                Upload\r\n            </Button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImageUpload\r\n"]},"metadata":{},"sourceType":"module"}