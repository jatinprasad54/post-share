{"ast":null,"code":"import _slicedToArray from\"D:/REACT/7.Instagram/instagram-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./Post.css';import Avatar from'@material-ui/core/Avatar';import{db}from'./Firebase';import firebase from'firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Post(_ref){var postId=_ref.postId,user=_ref.user,username=_ref.username,caption=_ref.caption,imageURL=_ref.imageURL;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];useEffect(function(){var unsubscribe;if(postId){unsubscribe=db.collection(\"posts\").doc(postId).collection(\"comments\").orderBy('timestamp','desc').onSnapshot(function(snapshot){setComments(snapshot.docs.map(function(doc){return doc.data();}));});}return function(){unsubscribe();};},[postId]);var postComment=function postComment(e){e.preventDefault();db.collection(\"posts\").doc(postId).collection(\"comments\").add({text:comment,username:user.displayName,timestamp:firebase.firestore.FieldValue.serverTimestamp()});setComment(\"\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post__header\",children:[/*#__PURE__*/_jsx(Avatar,{className:\"post__avatar\",alt:username,src:\"/static/images/avatar/1.jpg\"}),/*#__PURE__*/_jsx(\"h3\",{children:username})]}),/*#__PURE__*/_jsx(\"img\",{className:\"post__image\",src:imageURL,alt:\"post\"}),/*#__PURE__*/_jsxs(\"h4\",{className:\"post__text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:username}),\" \",caption]}),/*#__PURE__*/_jsx(\"div\",{className:\"post__comments\",children:comments.map(function(comment){return/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:comment.username}),\" \",comment.text]});})}),user&&/*#__PURE__*/_jsxs(\"form\",{className:\"post__commentBox\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"post__input\",type:\"text\",placeholder:\"Add a comment...\",value:comment,onChange:function onChange(e){return setComment(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{disabled:!comment,className:\"post__button\",type:\"submit\",onClick:postComment,children:\"Post\"})]})]});}export default Post;","map":{"version":3,"sources":["D:/REACT/7.Instagram/instagram-clone/src/Post.js"],"names":["React","useState","useEffect","Avatar","db","firebase","Post","postId","user","username","caption","imageURL","comments","setComments","comment","setComment","unsubscribe","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","postComment","e","preventDefault","add","text","displayName","timestamp","firestore","FieldValue","serverTimestamp","target","value"],"mappings":"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","sourcesContent":["import React,{ useState , useEffect} from 'react'\r\nimport './Post.css'\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport {db} from './Firebase';\r\nimport firebase from 'firebase';\r\n\r\nfunction Post({ postId, user, username , caption , imageURL}) {\r\n    const [comments, setComments] = useState([]);\r\n    const [comment, setComment] = useState('');\r\n    \r\n    useEffect(() => {\r\n        let unsubscribe;\r\n        if (postId) {\r\n          unsubscribe = db\r\n            .collection(\"posts\")\r\n            .doc(postId)\r\n            .collection(\"comments\")\r\n            .orderBy('timestamp','desc')\r\n            .onSnapshot((snapshot) => {\r\n              setComments(snapshot.docs.map((doc) => doc.data()));\r\n            });\r\n        }\r\n        return () => {\r\n            unsubscribe();\r\n          };\r\n        }, [postId]);\r\n\r\n        const postComment = (e) => {\r\n            e.preventDefault();\r\n      \r\n            db.collection(\"posts\").doc(postId).collection(\"comments\").add({\r\n               text: comment,\r\n              username: user.displayName,\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp()\r\n             });\r\n             setComment(\"\");\r\n          };\r\n    return (\r\n        <div className=\"post\">\r\n        <div className=\"post__header\">\r\n        <Avatar className=\"post__avatar\"\r\n            alt={username}\r\n            src=\"/static/images/avatar/1.jpg\"\r\n        />\r\n            <h3>{username}</h3>\r\n            </div>\r\n            <img className=\"post__image\"\r\n             src={imageURL} alt=\"post\" />\r\n\r\n             <h4 className=\"post__text\"><strong>{username}</strong> {caption}</h4>\r\n             \r\n             <div className=\"post__comments\">\r\n          {comments.map((comment) => (\r\n            <p>\r\n              <b>{comment.username}</b> {comment.text}\r\n            </p>\r\n          ))}\r\n        </div>\r\n             \r\n             {user &&(\r\n                <form className=\"post__commentBox\">\r\n                 <input \r\n                     className=\"post__input\"\r\n                     type=\"text\"\r\n                     placeholder=\"Add a comment...\"\r\n                     value={comment}\r\n                     onChange={(e) => setComment(e.target.value)}\r\n                 />\r\n\r\n\r\n             <button\r\n              disabled={!comment}\r\n              className=\"post__button\"\r\n              type=\"submit\"\r\n              onClick={postComment} >\r\n              Post\r\n              </button>\r\n              </form>\r\n             )}\r\n             \r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Post\r\n"]},"metadata":{},"sourceType":"module"}